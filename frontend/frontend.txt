
---

### **前端开发说明 (适配 FastAPI 后端)**

**项目代号：** PersonaFlow (信流)

**致开发者：**

你好，朋友。

欢迎来到 PersonaFlow 项目。我们已经用一个简单的原型验证了产品的核心价值，现在，我们需要你的专业能力，为这个产品的灵魂，打造一具与之匹配的、精致的“肉身”。

我们的后端已经完全API化（使用FastAPI），你将要构建的前端是完全独立的。你的唯一数据源和交互对象，就是后端提供的API接口。忘了数据库吧，你的世界里只有 **HTTP请求** 和 **JSON数据**。

我们追求的不仅仅是功能，更是一种“道”与“专注”的产品气质。请在每一个像素、每一次交互中，都思考如何体现这一点。

#### **一、 核心功能需求 (The "What")**

**1. 主信息流页面 (Feed View)**

这是用户体验的核心，请倾注最多的心力。

*   **数据加载与状态管理**：
    *   **启动时**：向后端发起 `GET /api/feed` 请求。
    *   **获取数据**：你将收到一个包含多篇文章对象的JSON数组。
    *   **状态存储**：将这个数组存入前端的状态管理库中。这是我们的本地“卡片队列”。

*   **卡片式交互 (一次一张)**：
    *   **渲染**：只渲染本地状态队列中的第一篇文章。
    *   **卡片内容**：卡片上必须清晰、优雅地展示从API获取的以下字段：
        *   `title` (标题)
        *   `source.name` (来源名称)
        *   `ai_rationale` (**AI评分理由**)
        *   `ai_summary` (AI生成的摘要)
        *   `published_at` (发布日期)

*   **用户操作 & API 调用**：
    *   **单击卡片**：这是一个**纯前端**行为。切换到一个“沉浸阅读模式”的视图，展示该文章的完整 `content` 字段。此模式应有明确的“返回”或“关闭”按钮。
    *   **双击卡片 (喜欢)**：
        *   向后端发起 `POST /api/feed/action` 请求。
        *   请求体 (Payload): `{ "article_id": [当前文章ID], "action": "like" }`
        *   **前端逻辑**：API调用成功后，从本地状态队列中**移除**当前卡片。
    *   **划走卡片 (已读)**：
        *   向后端发起 `POST /api/feed/action` 请求。
        *   请求体 (Payload): `{ "article_id": [当前文章ID], "action": "read" }`
        *   **前端逻辑**：API调用成功后，从本地状态队列中**移除**当前卡片。
    *   **界面更新**：当本地队列中的卡片被移除后，界面应自动、平滑地过渡到队列中的下一张卡片。
        其他按钮：一个不喜欢的按钮

*   **终结页 (The End Page)**：
    *   **触发条件**：当前端状态队列变为空时。
    *   **呈现**：**立即**切换到一个静态的、宁静的视图。禁止显示任何加载指示器或空白页。
    *   **视觉**：一张有禅意的背景图（如一杯热茶），配上一行文字。
    *   **文案**：“林间拾穗毕，愿君满载归。”

**2. 设置页面 (Settings View)**

这是用户配置自己信息环境的地方，应做到清晰、直观。

*   **订阅源管理**：
    *   **加载**：`GET /api/sources` 获取所有订阅源列表并展示。
    *   **添加**：提供表单，用户输入后，调用 `POST /api/sources`。
    *   **删除**：在每项旁边设置删除按钮，调用 `DELETE /api/sources/{source_id}`。
    *   **更新**：提供编辑功能（如修改名称、开关），调用 `PUT /api/sources/{source_id}`。

*   **AI人格配置**：
    *   **加载**：`GET /api/settings/prompt` 获取当前 System Prompt 并显示在文本区。
    *   **保存**：用户编辑后，点击保存按钮，调用 `POST /api/settings/prompt`，将新的 prompt 内容放在请求体中。

#### **二、 体验与气质要求 (The "How It Feels")**

这部分定义了产品的灵魂。

1.  **卡片设计**：追求“沉静感”。请参考我们之前的讨论——足够的留白、优雅的字体、柔和的色调。它应该像一张精心设计的邀请函，而不是一则喧闹的广告。

2.  **动画与过渡**：
    *   **卡片切换的“重量感”**：这是关键。划走卡片的动画不应是轻浮的。想象一下把一本实体书缓缓合上，或者将一张卡片沉稳地归档。这个动画的缓动曲线 (easing function) 需要精心调试。
    *   **克制**：除核心交互外，避免任何不必要的动效。稳定和可预测性是“宁静感”的基础。

---